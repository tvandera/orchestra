#@ load("@ytt:overlay", "overlay")
#@ load("/lib/cmake.lib.yml", "typical_cmake_builds")

---
#@ def build_args():
test: true
build_dependencies:
  - revng-qa
  - llvm
dependencies:
  - llvm
  - qemu
use_asan: false
use_libcxx: true
extra_cmake_args:
  - -DLLVM_DIR=$ORCHESTRA_ROOT/lib/cmake/llvm
#@ end

#@overlay/match by=overlay.all, expects=1
#@overlay/match-child-defaults missing_ok=True
---
components:
  revng:
    repository: revng
    license: LICENSE.md
    default_build: optimized
    builds: #@ typical_cmake_builds(**build_args())
